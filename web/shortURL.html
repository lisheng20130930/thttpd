<!DOCTYPE html><html> <head>   <meta charset="utf-8" />   <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0" />   <title>短网址生成工具</title>  <link rel="stylesheet" href="main.css" />  <script language="JavaScript" src="clipboard.min.js"></script> </head> <body>  <div class="top">   <span style="float:right"><a href=""></a></a>&nbsp;&nbsp;</span>  </div>  <div class="header">   <div class="web_title">    <span>短网址生成工具</span>   </div>   </div>  <div class="clearall"></div>   <div class="mainbody">    <div class="box" id="search">     <div class="box_a">     <label style="margin-right:120px;"><input type="radio" name="url_type" value="shorten" checked="checked" onclick="shorten()" />生 成</label>     <label> <input type="radio" name="url_type" value="origin" onclick="originit()" />还 原</label>    </div>     <input name="url" id="url" type="text" value="" placeholder="输入长网址" style="width:90%;" />    <br />     <div class="box_b">     <span style="float:right">&nbsp;<input type="button" id="embed-submit" value="生 成" class="search_button" style="width:96px;" onclick="btnClicked()" /></span>    </div>    </div>   <div class="clearall"></div>    <div id="board" class="show_result">     <div class="show_result_title2">     结果:    </div>     <div id="showthis">     <span id="copycontent"></span>     <span id="copy_tool"></span>     <span id="copy_tip"></span>    </div>   </div>   </div>   <script type="text/javascript">		function shorten() {			var btn = document.getElementById("embed-submit");			btn.value ='生 成';			var inpt = document.getElementById("url");			inpt.value = '';  			inpt.placeholder = '输入长网址';  			var copycontent = document.getElementById("copycontent");      copycontent.innerHTML = '';      var copy_tip = document.getElementById("copy_tip");      copy_tip.innerHTML = '';      var copy_tool = document.getElementById("copy_tool");      copy_tool.innerHTML = '';		}		function originit() {			var btn = document.getElementById("embed-submit");			btn.value ='还 原';			var inpt = document.getElementById("url");			inpt.value = '';  			inpt.placeholder = '输入短网址';   			var copycontent = document.getElementById("copycontent");      copycontent.innerHTML = '';      var copy_tip = document.getElementById("copy_tip");      copy_tip.innerHTML = '';      var copy_tool = document.getElementById("copy_tool");      copy_tool.innerHTML = '';		}		    var clipboard = new Clipboard('#copyleftcon');    clipboard.on('success', function(e) {      console.log(e);			e.clearSelection();			var copy_tip = document.getElementById("copy_tip");			copy_tip.innerHTML = "<span style='color:#008000;font-size:15px;'>&nbsp;复制成功!</span>";    });    clipboard.on('error', function(e) {      console.log(e);			e.clearSelection();			var copy_tip = document.getElementById("copy_tip");			copy_tip.innerHTML = "<span style='color:#FF0000;font-size:15px;'>&nbsp;复制失败!请尝试手动复制.</span>";    });	</script>  <script>  	  	    function create() {    		var copycontent = document.getElementById("copycontent");        copycontent.innerHTML = 'Loading....';        var copy_tip = document.getElementById("copy_tip");        copy_tip.innerHTML = '';        var copy_tool = document.getElementById("copy_tool");        copy_tool.innerHTML = '';        var theurl = document.getElementById("url").value;        var xhr = new XMLHttpRequest();        xhr.open("POST", "/z/manager", true);		    xhr.send(JSON.stringify({"Cmd":1000,"BaseUrl":"http://"+window.location.host+"/z/","Url":theurl}));		    xhr.onreadystatechange = function (){	        if(xhr.readyState==4){	        	if(xhr.status==200){	            var obj = JSON.parse(xhr.responseText);	            if(obj.Code!=200){	            	copycontent.innerHTML = "Error";	            	return;	            }	            var copyTool= "<input type=\"button\" value=\"复 制\" id=\"copyleftcon\" class=\"search_button\" data-clipboard-action=\"copy\" data-clipboard-target=\"#copycontent\">";	            copycontent.innerHTML = obj.Url;	                    			copy_tool.innerHTML = copyTool;	        	}else {	        		copycontent.innerHTML = "Connect Fail";	        	}	        }		    }    }        function restore() {        var copycontent = document.getElementById("copycontent");        copycontent.innerHTML = 'Loading....';        var copy_tip = document.getElementById("copy_tip");        copy_tip.innerHTML = '';        var copy_tool = document.getElementById("copy_tool");        copy_tool.innerHTML = '';        var theurl = document.getElementById("url").value;                var xhr = new XMLHttpRequest();        xhr.open("POST", "/z/manager", true);		    xhr.send(JSON.stringify({"Cmd":1001,"Url":theurl}));		    xhr.onreadystatechange = function (){	        if(xhr.readyState==4){	        	if(xhr.status==200){	            var obj = JSON.parse(xhr.responseText);	            if(obj.Code!=200){	            	copycontent.innerHTML = "Error";	            	return;	            }	            copycontent.innerHTML = obj.Url;	            	        	}else {	        		copycontent.innerHTML = "Connect Fail";	        	}	        }		    }    }        function btnClicked(){  		var btn = document.getElementById("embed-submit");			if(btn.value =='生 成'){				create();			}else{				restore();			}  	}    	</script>   </body></html>